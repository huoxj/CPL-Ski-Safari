#Ski-Safari🏂
### Part I **开发环境**
>**平台**

- Windows 10 Professional 21H2

>**C语言环境**
* MinGW gcc 11.2.0

>**编译选项**

* CMakeLists.txt 见"/src/CMakeLists.txt"

>**第三方库**
* SDL2 2.26.0  SDL2_image 2.6.2
* Windows Multimedia (Windows自带音频接口winmm)

### Part II **游戏内容**

>**基本信息**

* 仅支持64位Windows平台游玩, 运行 "/bin/SKINGTALE.exe" 即可开始游戏

* 游戏窗口分辨率为1440\*900, 实际渲染分辨率为1600\*900, 帧数锁定60fps

* 最高分会以二进制文件的形式保存在本地 "/bin/Resources/hiscore.cfg"

>**游戏操作**

&nbsp; &nbsp; 游戏内仅接受空格输入, 包括(菜单内的)确定/继续/跳跃/后空翻

>**游戏机制**

* **跳跃**
&nbsp; &nbsp; &nbsp; &nbsp; 使用跳跃来越过场景内的石头, 注意当且仅当主角脚底下有滑雪痕迹时才可跳跃

* **拾取加成道具**
&nbsp; &nbsp; &nbsp; &nbsp; 地图中会生成ThunderSnail(蜗牛)/Papyrus(骷髅)/TheRiverPerson(船)/喷气背包等道具, 拾取后将获得一定速度的加成并且更耐撞

* **道具组合**
&nbsp; &nbsp; &nbsp; &nbsp; 不同的装备在拾取时会有不同的组合方式, 具体与滑雪大冒险原游戏相似

* **状态下降**
&nbsp; &nbsp; &nbsp; &nbsp; 撞到石头/落地时与地面夹角过大会使你的状态下降, 比如失去一件装备或跌倒, 此后你会获得0.5s的无敌时间以防多次状态下降. 落地时与地面夹角稍大会还使你的速度减慢

* **后空翻**
&nbsp; &nbsp; &nbsp; &nbsp; ~~草走忽略~~ 目前唯一的作用是调整你的落地角度, 就算你在空中翻了几圈落地也不会有速度加成, 但是会获得我对你默默的赞赏👍

* **雪崩**
&nbsp; &nbsp; &nbsp; &nbsp; 雪崩由一群没有坏心眼的小花代替, 雪崩的速度会逐渐加快(到后期真的很快!)

### Part III 游戏特色

>**地形生成**

&nbsp; &nbsp; &nbsp; &nbsp; 依靠贝塞尔曲线的相关知识, 地形能够随机并且连续地生成, 而且可以随时查询某一点处地形的高度, 但仅使用了二次贝塞尔曲线导致地形没有很刺激的起伏

>**物理模拟**

&nbsp; &nbsp; &nbsp; &nbsp; 改进了物理模拟, 更新了贴地和碰撞判定, 并且人物在空中下落时会顺时针旋转. 对人物采用点碰撞侦测来计算地面切线角度, 执行效率更高

>**装备组合**

&nbsp; &nbsp; &nbsp; &nbsp; 仅使用一个变量存放人物当前装备状态, 绘制了一个状态图来实现状态转移(类似虚幻引擎的动画状态机), 可以仅通过两个函数 状态上升/状态下降 来控制人物的装备组合

>**摄像机坐标系**

&nbsp; &nbsp; &nbsp; &nbsp; 在原有逻辑渲染坐标系上创建了摄像机坐标系, 可以控制实际渲染区域的x/y位移以及缩放比例. 摄像机会根据当前人物的 位置/速度/离地高度 通过插值改变镜头的各项数值, 达到与原版相似的平滑视角

>**本地记录**

&nbsp; &nbsp; &nbsp; &nbsp; 使用fread/fwrite读取和记录最高分, 即使退出游戏你还是可以向朋友炫耀你的最高分(

>**Sprite**

&nbsp; &nbsp; &nbsp; &nbsp; 运用AnimateSprite减少图片加载数量. 并且将字体做成图片, 无需调用SDL_TTF库(dll文件40多MB)就能渲染字体, 大大减小了游戏体积(游戏本体仅9MB, 虽然还可以压缩音频文件大小)
